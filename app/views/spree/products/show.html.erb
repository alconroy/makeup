<% cache [I18n.locale, current_currency, @product, @product.possible_promotions] do %>
  <div data-hook="product_show" itemscope itemtype="https://schema.org/Product">
    <div class="col-md-4 product-left-part" data-hook="product_left_part">
      <div data-hook="product_left_part_wrap">
        <div id="product-images" data-hook="product_images">
          <div class="panel-body text-center">
            <%= render :partial => 'image' %>
          </div>
        </div>
      </div>

      <div data-hook="product_properties">
        <% render :partial => 'properties' %>
      </div>

      <div data-hook="promotions">
        <%= render :partial => 'promotions' %>
      </div>
    </div>

    <div class="col-md-8 product-right-part" data-hook="product_right_part">
      <div data-hook="product_right_part_wrap">
        <div id="product-description" data-hook="product_description">
          <h1 class="product-title" itemprop="name"><%= @product.name %></h1>
          <div id="cart-form" data-hook="cart_form" itemprop="after-fav">
            <%= render :partial => 'cart_form' %>
          </div>
          <p>
            <span class="label">Sku: </span>
            <span><%= @product.ts_code %></span>
          </p>
          <p>
            <span class="label">Colour: </span>
            <span><%= @product.colour %></span>
          </p>
          <p>
            <span class="label">Page Yield: </span>
            <span><%= @product.page_yield %></span>
          </p>
          <p>
            <span class="label">Machine Models: </span>
            <span><%= @product.machine_models %></span>
          </p>
      </div>

      <%= render :partial => 'taxons' %>
      </div>
    </div>

    <div id="tabs" class="product-tabs">
      <ul>
        <li>
          <a href="#tabs-1">Description</a>
        </li>
        <li>
          <a href="#tabs-2">Reviews</a>
        </li>
      </ul>
      <div id="tabs-1" style="display:block;">
        <div class="description" itemprop="description" data-hook="description">
          <p><%= product_description(@product) rescue Spree.t(:product_has_no_description) %></p>
        </div>
      </div>
      <div id="tabs-2">
        <%= render 'spree/shared/reviews' %>
        
        <%= form_for review, :url => product_reviews_path(product), :html => {:method => :post} do |f| %>
          <%= render "spree/shared/error_messages", :target => review %>

          <div class="review_rating_field">
            <div class="label-field">
              <%= f.label :rating %>
              <span class="required">*</span>
            </div>

            <div class="stars-field">
              <%= render "spree/reviews/stars", :stars => review.rating, :edit_enabled => true %>
            </div>
          </div>

          <div class="review_name_field">
            <div class="label-field">
              <%= f.label :name %>
              <span class="required">*</span>
            </div>

            <div class="text-field">
              <%= f.text_field :name, :maxlength => "255", :size => "50" %>
            </div>
          </div>

          <div class="review_title_field">
            <div class="label-field">
              <%= f.label :title %>
            </div>

            <div class="text-field">
              <%= f.text_field :title, :maxlength => "255", :size => "50" %>
            </div>
          </div>

          <div class="review_review_field">
            <div class="label-field">
              <%= f.label :review %> <span class="required">*</span>
            </div>

            <div class="text-field">
              <%= f.text_area :review, :wrap => "virtual", :rows => "10", :cols => "50" %>
            </div>
          </div>

          <div class="review_submit">
            <%= f.submit Spree.t(:submit_your_review), :class => "button bg_darkfirst" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  
<% end %>